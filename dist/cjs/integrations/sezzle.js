(()=>{"use strict";var e={5470:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(9783),o=function(){function e(e,t){this._formBuilder=e,this._options=t}return e.prototype.postForm=function(e,t,r,n){var o=this._formBuilder.build(this._prependHost(e),t,n);window.addEventListener("unload",function e(){window.removeEventListener("unload",e),r&&r()}),document.body.appendChild(o),o.submit()},e.prototype._prependHost=function(e){return this._options&&this._options.host&&!(0,n.isAbsoluteUrl)(e)?(0,n.joinPaths)(this._options.host,e):e},e}();t.default=o},8686:(e,t,r)=>{t.createFormPoster=void 0;var n=r(9165);Object.defineProperty(t,"createFormPoster",{enumerable:!0,get:function(){return n.default}});r(5470)},9165:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(9828),o=r(5470);t.default=function(e){var t=new n.default;return new o.default(t,e)}},9783:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.joinPaths=t.isAbsoluteUrl=void 0,t.isAbsoluteUrl=function(e){return/^https?:\/\//.test(e)},t.joinPaths=function(e,t){return"".concat((r=e,r.replace(/\/$/,"")),"/").concat(function(e){return e.replace(/^\//,"")}(t));var r}},9828:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.build=function(e,t,r){var n=this,o=document.createElement("form");return o.style.display="none",o.setAttribute("action",e),o.setAttribute("method","POST"),o.setAttribute("target",r||"_top"),Object.keys(t).forEach(function(e){var r=t[e];o.appendChild(n._createInput(r,e))}),o},e.prototype._createInput=function(e,t){var r=document.createElement("input");return r.setAttribute("name",t),r.setAttribute("type","hidden"),r.setAttribute("value",e),r},e}();t.default=r}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{createSezzlePaymentStrategy:()=>l});var o=r(8686);class i extends Error{constructor(e){var t;super(e||"An unexpected error has occurred."),this.name="StandardError",this.type="standard",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class a extends i{constructor(e){super(e||"Invalid arguments have been provided."),this.name="InvalidArgumentError",this.type="invalid_argument"}}class s extends a{constructor(e){let t="Unable to submit payment for the order because the payload is invalid.";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(", ")}.`),super(t),this.name="PaymentArgumentInvalidError"}}class u extends i{constructor(){super("The current order does not need to be finalized at this stage."),this.name="OrderFinalizationNotRequiredError",this.type="order_finalization_not_required"}}class c{constructor(e,t){this._formPoster=e,this._paymentIntegrationService=t}execute(e,t){return r=this,n=void 0,i=function*(){const{payment:r}=e,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["payment"]),o=r&&r.paymentData;if(!r||!o)throw new s(["payment.paymentData"]);yield this._paymentIntegrationService.submitOrder(n,t);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},r),{paymentData:o}))}catch(e){if(!(e=>"object"==typeof e&&null!==e&&"body"in e)(e)||"object"!=typeof(i=e.body)||null===i||!("additional_action_required"in i)||!this._isAdditionalActionRequired(e.body))return Promise.reject(e);const{body:{additional_action_required:{data:{redirect_url:t}}}}=e;return new Promise(()=>{this.redirectUrl(t)})}var i},new((o=void 0)||(o=Promise))(function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o(function(e){e(r)})).then(a,s)}u((i=i.apply(r,n||[])).next())});var r,n,o,i}finalize(){return Promise.reject(new u)}initialize(){return Promise.resolve()}deinitialize(){return Promise.resolve()}redirectUrl(e){return this._formPoster.postForm(e,{})}_isAdditionalActionRequired(e){const{additional_action_required:t,status:r}=e;return"additional_action_required"===r&&t&&"offsite_redirect"===t.type}}class d extends c{redirectUrl(e){window.location.replace(e)}}const l=Object.assign(e=>new d((0,o.createFormPoster)(),e),{resolveIds:[{id:"sezzle"}]});module.exports=n})();
//# sourceMappingURL=sezzle.js.map